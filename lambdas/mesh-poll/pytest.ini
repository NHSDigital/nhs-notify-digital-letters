[pytest]
testpaths = src/__tests__
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --tb=short
env =
    AWS_ACCESS_KEY_ID=testing
    AWS_SECRET_ACCESS_KEY=testing
    AWS_DEFAULT_REGION=eu-west-2
    SSM_PREFIX=/dl/test/mesh
    INBOX_WORKFLOW_ID=TESTINBOX
    OUTBOX_WORKFLOW_ID=TESTOUTBOX
    MAXIMUM_RUNTIME_MILLISECONDS=240000
    ENVIRONMENT=dev
    DEPLOYMENT=dev-1
    EVENT_PUBLISHER_EVENT_BUS_ARN=arn:aws:events:eu-west-2:123456789012:event-bus/test-bus
    EVENT_PUBLISHER_DLQ_URL=https://sqs.eu-west-2.amazonaws.com/123456789012/test-dlq
    CERTIFICATE_EXPIRY_METRIC_NAME=test-cert-expiry
    CERTIFICATE_EXPIRY_METRIC_NAMESPACE=test-namespace
    POLLING_METRIC_NAME=test-polling
    POLLING_METRIC_NAMESPACE=test-polling-namespace
    USE_MESH_MOCK=true
    MOCK_MESH_BUCKET=test-mock-mesh-bucket

[coverage:run]
relative_files = True
omit =
    */src/__tests__/*
    */test_*.py
    */__pycache__/*
    */venv/*
    */.venv/*
    */env/*
